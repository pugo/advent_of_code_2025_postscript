%!PS-Adobe-3.0
%%BoundingBox: 24 24 571 818
%%Title: Advent of Code 2025 - day 4
%%For: Hackvalue
%%Creator: Anders Piniesjö
%%CreationDate: Sun Dec 07 22:29:41 2025
%%Orientation: Portrait
%%DocumentMedia: A4 595 842 0 () ()
%%EndComments

% -----------------------------------------------------------------------
%  Advent of Code 2025 in Postscript - Day 4
%  by Anders Piniesjö
%
%  Run with: ghostscript 4.ps
% -----------------------------------------------------------------------

%% ----- Data -------
/grid_demo [
(..@@.@@@@.)
(@@@.@.@.@@)
(@@@@@.@.@@)
(@.@@@@..@.)
(@@.@@@@.@@)
(.@@@@@@@.@)
(.@.@.@.@@@)
(@.@@@.@@@@)
(.@@@@@@@@.)
(@.@.@@@.@.)
] bind def

/grid [
(....@.@..@@@@.@.@@@@@@@@@@..@@@.@@@@@.@....@.@@@.@@.@@..@@@.@.@@@@@.@.@@@@@.@@@@@@.@@@@@@@.@@@..@.@...@@@..@.@@@@@@.@..@@@@@.@@@.@@.@@@@@.@)
(@@..@@.@@@@.@@...@...@@.@@.....@@..@@@@....@@.@.@@@@@...@@@@.@.@@@.@@@@..@.@@@@@@.@@..@@.@@.@@@@@...@@.@@@.@@@.@@@.@..@.@.@@@@@@.@@.@@.@@.@)
(@@@.@.@@@.@@@...@@@@@.@@@@@@..@@@@@@@@.@@.@@@.@.@.@.@@@@@@.@.@.@.@.@@@@@@@@@@@@@@@.@..@@@@.@@.@...@@.@..@.@@@@...@@@@@@@@@.@@@@.@@@@@@....@)
(@...@.@@@..@@@@@.@@.@@..@@.@@@.@@.@..@@.@.@@.@.@@@..@.@@..@.@@@.@..@@@.@.@@@@@.@@@@@@@@@.@.@.@..@@.@@@.@@..@...@@.@@.@.@.@@@.@@.@@.@@@@.@@@)
(@@@@..@@@@@@@@@@@@@.@@@@@@...@@.@@@@@@.@@@....@@.@@@@@.@@..@@..@@..@@.@...@@..@@@@@.@@@@@@@@@.....@@.@@.@.@@@.@..@@.@@..@..@.@@.@@@@..@..@@)
(@@.@@@@@..@@.@@@@@..@@@.@@.@..@@@......@@.@@@@.@@@@@@.@@..@@@@@@@...@@@..@@@@@.@@.@..@@@@@.@@.@@.@.@..@.@@.@@..@.@@@.@@@...@@..@..@@@@@@@@@)
(@.@@@@..@.@@@@@@@@@@@@@@@@.@@@@@@@@.@.@....@.@..@..@..@@@@.@@@@@@@@.@@@@.@@@.@.@@@@.@@@..@@@@.@@.@@.@@@@.@..@..@@@@@@...@.@....@@@.@@.@...@)
(@@.@@.@@@...@.@..@@@@...@...@@@@..@@@@.@@@@.@@@@@..@@..@..@@.....@@.@.@.....@@@@@..@.@@@@@@@@.@..@@@@@@.@..@@@..@@@@@@@..@.@@@...@.@@.@@...)
(@@@@.@@@.@@@.@@@..@...@.@....@..@@.@.@@@@@@@..@@.@@...@@@@@.@@..@@@.@.@@@@@.@@..@@.@@@@@..@.@...@@@.@@.@@@.@....@@..@.@..@.@@.@@@.@@@@@@@.@)
(.@@@@.@@@.@@@@@@..@@@.@@.@@@@.@@.@@@@@@.@@@@.@@@.@@.@..@@@@.@.@.@@...@@@@......@@@@@@@@@@@@@..@@@@.@@@@@.@@..@@@@@.@@@@@@@@@@@..@..@@@.@@@@)
(.@@.@.@...@@@.@@.@...@..@@@@@@@@@@@..@.@@.@@@@.@@.@@@@@@@@@.@.@..@@@.@@@@@@@@.@@@@...@@.....@.@@.@@.@@.@@.@@.@.@@@@@@@@@@@@...@@.@.@@.@@@@@)
(@...@.@.@@@@@@@@@@@@@..@@@.@.@@@@..@@@@@@...@.@@@.@.@......@@@.@...@@@.@.@.@.@.@@.@.@@@@...@@...@@.@.@@@.@@@.@@.@@@@@@@..@@@.@.@@@@@@.@@@@@)
(@@@@@.@@@.@.@@@@@@@@.@@@@.@.@@@...@@...@@@@@@@@.@@.@@..@.@@.@@..@@@@..@..@...@@@.@@.@....@..@@@@@.@@@.@@.@@@@@.@@@.@@@@.@@@..@@@@.@@...@@@@)
(..@@.@@..@@@@@@@@@@.@..@@.....@@..@@.@@@...@.@@@@@@@.@.@@..@@.@@@@@.@@@@@@@@@.@@@@@.@.@...@@.@.@@.@..@@...@@@.@@..@..@.@@@@@..@@@...@.@@@..)
(@@@@....@.@@...@.@.@.@@@@@@@.@..@@@....@.@@@.@@.@@@@@@..@@@....@@....@@@@@@@@@@..@..@..@@.@@@@....@@@@..@@@.@.@@@@@.@@@@.@.@@@@@@@...@..@.@)
(@@..@..@.@@@@.@@.@.@.@@.@.@...@.@@@@@@@..@.@@@@.@.@@..@@@@@@@.@@..@@.@.@@@@@.@..@.@@@@@@@@@@@@@@.@..@@@@@@@@@@.....@.@@.@@@.@.@@@.@@@@@@@@.)
(@.@..@@@@@.@@@@@@@@.@@@@@..@@@@.@@@@.@@@.@@@@@@.@..@@@.@@.@.@.@@@@.@@.@.@.@@@.@@@@...@.@@@@.@...@@@..@..@@@@@.@.@@@@@@@@@..@@@@.@@.@@@@@.@.)
(@..@.@@@..@@@.....@.@@.@@@..@...@@.@.@@..@@@@@..@@@@.@.@@@.@..@@.@@@@.@..@@.@@@..@@.@@@@@@@@@@@.@.@@..@@@.@@@@@@@.@@.@@@..@@@..@@..@@@@.@@@)
(.@..@@.@@@@@@@.@@@...@.@.@..@@@.@@@@@@.@@..@.@......@.@@..@@.@@@.@@@.@@@@@@@.@@.@.@@.@@..@@@..@@.@.@@@.@.@.@@@@@@@.@.@@.@@@@@@@@@@@...@.@.@)
(@.@@..@@@..@@@@@@@..@@@.@.@@@.@@@...@@....@@@..@@@.@@@@.@@.@.@..@...@@.@@@@@@.@@@.@@..@@@@@@...@@.@@@@@@..@.@@@@@@@@@@@.@.@@@.@@@@@.@.@@@.@)
(@@@@@.@@@..@@@@@..@..@@@@@@..@@..@.@@@@@@@@...@@.@@...@@@.@....@@.@@...@.@.@.@@@@.@@@@@@.@@@@@.@@@@.@.@@@.@@@@@@@@@..@@@@..@@@..@@..@.@@...)
(@@@@@..@@@@@@@@@@..@@@..@@@...@...@@.@..@.@@..@@@@@..@@.@@@@@@.@@.@@@@@@@...@@@.@@@..@@..@.@@...@@@@@.@.@@@@@..@@@@@@.@..@@.@@@.@@.@@@@@.@@)
(@@..@.@.@.@..@@@@@@.@.@@@@.@@.@@@@@@@.@...@.@@@.@@.@@@...@@.@@@.@@@@@@.@.@.@@@.@@...@@..@@...@...@@@@@..@.@..@@@@..@.@.@@@@@@@..@...@.@..@.)
(@.@.@@@@.@..@.@@@@.@@@@.@@@.@.@..@@@@@@.@.@.@@@@..@@@.@@@@.@@@@..@@@.@@.@......@@...@...@@.@@.@@@.@.@@@@@@@.@@@@..@.@@@@@.@.@@@@@.@...@@@@@)
(.@@.@...@.@@@@@@@.@...@.@..@@@.@...@@@.@@.@.@.@@@@@@@@@@@.@.@@...@@.@..@.@..@@@@@@.@@..@.@@@@@@@.@@.@@.@.@.@@..@@...@@@@.@@.@@@.@..@.@@@@@.)
(...@.@@..@.@@@@..@..@@@.@@.@.@@@.@@@@@@.@...@@@@@.@@...@@@.@.@@.@..@.@@@@..@.@.@@@@....@.@@@@..@@@@@@@@.@...@@.@..@@..@@@.@@@@@@@@@@.@...@@)
(@@@@@..@@.@@.@@@@.@@...@@@.@@@.@@@@.@@@@..@@@.@@.@@@@@@@..@@@..@@.@@.@@..@..@..@.@@@@@.@@@@.@@@..@@.@@.@@.@@@@.@....@@@@@@.@...@.@.@@..@...)
(.@@@@@.@@@@@.@.@@@..@.@@@@@.@@@@@..@..@@.@@@..@@@@@.@.@@@@@.@@@@@.@@@@@@@@@@@.@@.....@.@.@@@@@@@.@.....@@@.@@@.@@.@@@@@@.@....@@..@@@...@.@)
(@@@@@.@.@@...@@..@..@@@@@@@@@@@.@@..@.@@@..@..@@@@@@.@@..@.@@@@@@@@...@@.@@@....@@@@..@..@.@.@@@@.@@.@.@@.@@@.@.@..@@@.@@@@@@@...@..@@@@@@.)
(.@@@..@@.@.....@@@@...@.@@@@@@.@@@@@@@@@@@@@@.@@@@.@@@@.@@@@.@.@@.@@.@@@@@@.@@...@@.@@@@@@..@@...@.@..@..@@..@@@@@..@.@@..@@@@...@@@@.@@@@@)
(..@@@@.@@.@@@@@.@...@@.@.@@.@.@@.@@@@.@..@@@@@@@.@@@.@.@..@..@@.@@@@@@@@.@..@@@@@@@@@.@@@.@@.@@.@.@@@@....@@@@@@..@@@..@.@@@..@....@@.@@.@@)
(@..@.@.@...@@...@@@.@.@.@....@@@.@..@@.@.@..@@....@@@.@.@@.@.@@@@@@.@@@.@@.@@@@@@@@@@@...@.@....@.@@.@@@.@@@@@@@@.@@@@@.@@..@..@.@@..@@@@@@)
(...@@...@.@@@@@..@@@@@@@.@.@.@@..@..@@..@@.@@....@@@@@@@.@@@@.@@@@@...@.@@@@@@@..@.@@.@@@@@@@...@@.@.@@@@.@@..@@..@@@@@@@@@.@.@.@@.....@@@.)
(@@@.@...@@.@@.@.....@@@.@.@.@.@@.@.@@@@@@.@.@@@@.@.@@@.@@..@@.@.@@@.@@@.....@@@.@..@@@@@@@@@@@@@..@@@@.@@@.....@@.@.@@@..@@.@.@.@..@@@@@.@@)
(@...@...@@.....@@..@..@@@@.@@@@@@.@@.@@.@@@..@.@.@.@@.@.@@@@@..@@...@@@@....@@@@@@@.@@..@@..@.@@@..@.@@@.@.@.@@@.@.....@.@@@@.@@@@.@@@.@.@@)
(.@@@..@.@@@..@@.@@@@....@@.@.@@.@@@@@@@@@@@.@@.@.@@@@@@@@@..@..@..@@@@.@.@@@..@..@@@.@@.@@...@@..@@@@..@...@@@..@@.@@.@@@.@..@@@@@@@@@..@.@)
(@@.@..@@@.@@..@@@.@.@@@@@@@@.@..@@.@@@@@.@.@@@..@@@@@@@@.@@.@@@@@@..@@.@..@.@@@@..@..@@@..@@.@.@@@@@.@@@.@@@.@@@.@@@.@@.@@.@@@.@@.@@@@@@@@@)
(@.@....@@@....@@@@@..@@.@..@@@@@.@@@.@..@@@.@@@@@@@@@@@..@@.@...@@@.@@@.@.@@@......@..@@.@.@.@@@..@.@..@.@@@@@@.@@..@@..@@.@@.@.@...@.@@@@@)
(.@@@@.@@@@...@.@..@@@.@@..@.@.@..@@@@.@@.@@@@@@@@@.@.@@.@@.@@@@@@@@.@@@.@@@@..@@@@@@..@@...@@@@@..@@@@@@@@@@@@@@@.@@.@..@@..@@.@@.@.@..@@@.)
(@.@@@.@@@.@@@@@.@@.@@...@@@@@@@@@.@@@@@@...@@@@@@@@.@@.@.@@.@.@@@@.@..@@@@..@.@@@@.@@@@@.@@.@@@.@@.@.@@.@..@@.@.@.@@@@@@@@@..@@@@@@.@.@@.@@)
(@@@@@@.@@.@@@.@.@.@@@@@@@@@.@.@.@.@@..@@...@@@.@.@@..@@.@@@@@@@@@@..@@@@@@.@@.@@@.@@..@@@.@@@@@..@@@@..@.@@..@@@.@@@@@..@@@.@..@.@.@...@.@@)
(@...@..@@@@.@.@@@@.@...@@.@@@@@@@@@..@.@.@..@@@@@@@.@@@..@..@.@@.@@@@....@....@@.@@@.@@@@...@@@@@@@.@@@..@@@.@....@@@@@@@@@@@@@@@@@@.@@@.@@)
(...@.@@.@.@@....@....@@@@@@..@@@@@@@.@@.@@@@@@@.@@..@@.@@.@.@@.@@.@..@@@@.@.@...@@@.@.@..@.@..@@.@@@@.@@@@@@....@@.@..@@@.@@.@@.@@@@@.@@...)
(@...@@@.@@..@.@@..@@..@@@.@.@.@@@.@@@@@@@..@@.@@@.@@@.@@@@@@@@@@...@.@@@@@.@..@..@.@.@.@....@@@..@@.@@@@@@@@.@@.@@@@.@@@@@@@@@@@@@@@@@@...@)
(@@@@@@@@.@..@@@@@@.@.@@@@.@@@@.@@.@.@@@@@@@@..@@@@.@@@.@@.@@@..@..@..@.@@.@@@@.@.@.@@.@..@@@..@.@@@@@...@@@.@@..@@..@@@..@@@.@@..@....@@@.@)
(@@@..@@@@.@@.@.@@.@@@@@@.@.@.@@@@@@...@@@@@@.@.@..@@@@@@@@.@.@@@..@@.@@@.@@..@@@@@@@@@.@@@.@@@@......@..@@@.@.@@@.@@@..@@@.@@.@.@.@..@@..@.)
(@@@@@.@...@.@....@@@@@@@.@.@@@@.@@.@.@@@@@.@@.@.@.@@@@...@@@..@.@@@@@@@.@.@@@@.@..@@@.@@.@.@.@@@.@.@@@@@@@@.@.@@@@....@.@@.@.@@.@@@.@@.@@@@)
(@.@@@..@@.@@.@..@..@.@..@@@.@@.@@@.@@.@@@..@@@@...@..@@@.@@@..@@@@...@@@@.@@@@@.@@@...@.@@@..@...@.@@@..@@.@.@.@@..@.@@.@@.@@..@.@@@...@@@.)
(.@@..@@.@@.@@..@@..@@@@@@@@@@..@@@@@@@@@@@@.@@@@@@...@@.@@.@@@@..@@@.@@.@@@.@..@@@@@@@@@..@..@@..@.@.@@.@@@..@@@@@@@........@@@@..@@@@..@..)
(@@@.@@@@@.@.@@.@.@@@@.@..@@@@@...@@@.@....@@@.@.@..@@.@.@@@.@.@@.@..@@..@.@@@.@@@@@@@@.@@@@.@@..@.@@@.@@@.@.@@@@.@@@@@@.@.@.@@@..@..@.@@..@)
(@.@.@@@@@.@@@@.@..@...@.@@@@@@.@@@@@@@@.@....@@@@@.@.@.@@@@.@@...@@@@@@..@.@@.@@@..@@@...@.@@@@@.@..@@..@..@.@@@@..@.@@@@@@@..@...@.@@@@..@)
(.@@@@..@@.@@.@@@@..@@@@.@.@@@...@@.@.@@..@.@..@@@@...@@@@..@@@.@@@@@@@@.@@@@..@.@@.@@.@@.@.@@.@@.@@@@@...@@@@@.@.@.@@@@.@@.@.@.@..@.@@.@..@)
(@.@.@@@.@@.@.@..@.@..@.@@@@.@@.@@.@.@@@@@.@.@.@.@.@@@@@@.@@......@@@..@..@@@..@.@@..@@.@@@.@@.@@@.@.@.@.@@.@@@@@@@..@@...@@@@.@@@@.@@@..@@@)
(.@..@@@.@@@.@@@..@@@.@...@@@@.@.@@@@@@@.@.@@.@@@@@@@@.@@@@.@@.@@@@...@@@@@.....@....@@@@@@@.@@@@.@@@@@@@.@@.@..@..@@..@@@@..@@@@@@@@..@.@@@)
(@@..@@...@@@.@@@@.@@@@@@@@@..@.@..@..@@@@.@@@@@@...@@@.@@@@@...@@.@.@@@@@@@@@..@.@@.@@.@..@@@@.@.@@.@@.@@@.@.@.@@.@@@@@...@..@@@@@@@@@@@@..)
(@@@.@.@.@@..@@@@@@@.@@@.@.@@@@@@@@.@@@@@@@...@@@.@@.@...@@@..@.@@@@.@@@@@@@...@@@..@@@@@@.@@@.@.@.@@@@@..@@@.@...@@@@@.@@@@..@@@.@@@...@@.@)
(.@@.@.@.@.@.....@@@.@@@@..@.@@..@..@..@@.@@@@@@@.@@.@.@@....@@@@@@@@@.@@@.@@.@@.@.@@@@@@@...@@....@@@@@..@..@@@@@@@.@@@@@@@@@...@@@@@..@@@@)
(@@@....@@@@@@..@@@.@@.@@.@..@@@.@@@@@..@@.@@@@@.@@@@.@@@.@@@@.@@@.@@@..@@@@@...@@@.....@@@@.@@@@@@.@@@@@@@@@.@@@.@.@@@@@...@@@@@@@.@.@..@@@)
(.@..@@@@@..@@@@.....@@@@@.@@@@@@.@@@.@.@@@@@.@..@..@.@.@@.@@..@...@@@@@@@@@@@.@@@..@@.@@..@..@..@@.@.@@@@.@..@.@@..@@..@.@..@.@.@@@@@@@@@@@)
(.@@@@@......@@@@......@.@.@@.@.@@@.@@@@.@...@@@..@@..@....@@@.@@...@.@@@@...@.@@.@.@@@@@...@.@@.@@@@..@@@@@@.@@.@@@@.@..@.@@@@@@@@@.@@.@@@@)
(@@..@@@@@@@.@.@..@.@@@@@.@.@@@@..@@@.@@@@..@@@@...@.@.@.@..@....@@@@@.@..@@@@.@@@.@@@@.@@@.@@@.@@..@@@@@@@@.@....@@@@@@@.@..@@@@@@@.@..@@@@)
(.@...@@@@..@@.@...@@.@@.@..@@@@@@.@@@@.@...@@@@@.@@@@@@@...@@@...@..@@.@@@..@...@@@@@@..@@@..@@@@@...@.@.@@@@..@@@@.@@@@..@@@@.@@@@@@@@@@..)
(.@@@...@.@@..@..@@.@@@@@.@@@@@@@.@.@@@@@@..@..@@@..@@.@@@@@....@..@@.@.@.@.@.@.@@@.@.@.@@..@.@.@.@.@@@@@..@@..@@..@@.@.@@.@.@@@...@@.@@@@.@)
(@@..@@@@@@@.@..@..@@..@@@@@@...@@.....@@@..@.@@..@.@.@@@.....@.....@@.@.@.@.@@@@.@.@.@@@.@@....@@.@@@@.@..@@@.@@@@..@..@.@@.@@@@.@.@@.@@@.@)
(@@@.@.@..@@@@.@@@.@@.@...@.@@@@....@@..@.@@.@@..@.@.@@@@@@@@@@.@@@@.@@.@@@..@@@..@@@.@@@..@@@@.@@@.@@..@@@@@.@.@@@@@@.@.@.@@@.@@.@.@@@..@@.)
(@@@@@@@@.@@..@.@@@@@.@@@@@@@@.@...@..@.@@@@@@.@@@@..@@.@@@@.@@@.@.@...@.@.@....@@@@...@@@@......@@.@@@@@.@@@@..@@@@@.@.@@.@@@@@@..@@@@@@@..)
(.@@@@@@.@@@.@.@.@@..@@@@..@@.@@@@@...@@.@@@.@@@@@@.@@@@@@.@.@@@@.@.@@@@@.@@@@.@..@.@@@.@@@...@@@@@.@@@@...@@.....@@@..@..@@@.@@..@..@@@@.@.)
(..@@.@.@@..@.@..@@@@@.@@.@..@@@@@...@@...@.@@...@@.@.@@@....@@@..@@@@@.@....@@@@@@.@.@..@@@..@@.@@@.@@.@.@.@.@@..@@@@..@@@@@.@....@@.@.@@@@)
(@@@@.@..@.@@@@@@@@..@@@@@..@@.@@.@@@.@@@@@.@@@..@.@@.@@@.@.@.@.@..@@@.@.@.@@@..@@@@..@@@.@@@.@...@@@.@..@@@.@@.@@.@@@@@..@@@...@..@..@.@@@.)
(@@@@.@@@@@@@@@.@@.@.@@@@@@.@.@@..@@..@@@@.@@.@.@@@@@..@@@@.@@.@.@@@@@@@..@@.@@@.@@.@@@@..@@@@.@@.@..@@.@@.@@@.@..@@@.@@.@..@.@@@@.@@.@.@@@@)
(.@@.@.@@@@@@..@@....@@...@@..@@...@@@@@@.@@..@@.@@.@@@@@@@@@@.@..@@@@........@@@@.@@@@@@.@@@..@@@@...@@@@@@@@@@@.@@@@@.@@@.@...@@@@..@@@@@@)
(@@@@@.@.@@@@@@@@@...@.@.@@@@@@@@@@@@.@@@@@@@.@@@.@.@@@@.@.@.@.@@@@.@@@..@@..@..@@..@@@@@@@@@@@@@.@@...@@@@@@.@.@.@.@@@@@@@@@@.@@@@@@@@@@..@)
(.@@@.@...@@..@@@....@@.@@@@..@@@@@@@@@.@@@@@.@..@@....@.@@@@@@@@.@.@.@..@.@@.@.@.@@.@.@@@.@@.@@@.@@@.@@@..@.@@..@.@..@@.@@@@....@.@.@@.@@.@)
(@@@@@@@@@@@@...@@@@@.@@@@..@@@@..@.@@@.@@@@@..@@.@@..@@.@@@.@@.@@.@@@@.@@.@@.@@.@.@@@..@..@..@@@.@@.@.@@@@....@@@..@@@@@.@@@@.@@@.@@....@@@)
(@@@.@@@.@@@@@@@@.@...@@@@@.@...@@@@@.@.@.@@@.@@.@@@@..@@.@@@@.@@@..@@@.@@@...@.@@..@.@.....@@.@@..@.@@@@@@@@@@@@.@..@@@.@@.@@...@@@@@...@@.)
(@@.@@..@...@..@.@@.@..@@@@@@@@@@.@@@@@.@@@@@@@@@@.@@@@@@@.@@@@.@@@@..@@@.@@@.@@.@@..@..@@.@.@@..@@@@@@.@.@@.@@@@..@@@@@.@@.@@.@@.@@@@@@@...)
(@@.@@.@@.@..@@.@@@@@@.@@.@@@.@.@@@@@@@..@@@@..@..@@@.@...@@@@@@@@.@@.@.@@@@.@@@.@@@@.....@@@@....@..@@@.@@@@@@.@@.@..@@@..@@@.@.@@@...@@@@.)
(.@..@@@@@..@.@.@@..@@@...@@@..@@@...@@@@@@@.@.@@@@@.@@@.@@@@.@@@@.@.@.@@.@@@@@@@..@..@..@@@@..@@...@@@@@@..@@...@@...@@...@@.@@.@.@@.@@@@..)
(@.@@@@@@.@@@@@@@@....@@@@@@@.@@..@.@@@@@@...@@@.@@.@@@@@@@@@.@.@@@.@.@@@..@..@@@.@.@@.@@@.@@@@@@@.@@@@...@.@.@@@@@.@@@@.@@@@@@@@@.@.@@@@@@.)
(@@@@.@.@@.@@...@.@.@@@@....@@@@..@..@@.@.@..@@...@.@@@@@@@@@@@@.@@@@@...@@@@@..@@.@.@@@@@.@...@@.@@..@@@@@@.@@.@.@@@.@@.@..@@@.@@@@@@@@..@@)
(@@.@..@@@@@@.@@@@@@@.@@.@...@@@@@...@@.@@.@@@...@@@.@.@...@@.@@@@.@@@..@@@..@@..@@@@@..@.@@@@@.@.@@@@..@@@@@@.@.@@@@...@@@@@.@@....@@@..@@@)
(@@@@@.@..@...@.@.@...@.@@.@@@.@@..@@@@@.@.@@@@...@..@.@@@@@.@@@.@.@.@..@@...@@@@@@.@.@..@@@@.@.@@..@@@..@..@@@..@...@@@.@.@@@@.@.@@@@@@@.@@)
(@@@@@@@@.@.@.@.@@@@@@@...@...@@@@@@.@.@@@@.@@.@@@@@.@@.@..@@@.@.@@..@@@@.@@@@@.@.@@.@@@@@@..@@@@@@@@@@..@@..@@@@@@@@.@@.@@...@@@@@@@@@@@..@)
(@@@.@.@.@@@.@.@.@.@@@@.@.@@@.@.@..@..@.@@@@@@@.@@@@@.@@.@...@....@@@@@.@@@.@@@@.@@.@.@@@@@..@@@@@@@.@@...@@...@..@@@..@@@@@.@.@...@@@.@@@@.)
(.@@@@.@.@@@..@.@..@@..@@@@@@@@@@.@@@.@@.@..@..@...@@@.@@@...@.@@@@....@..@@@@@@.@@@@@.@.@@..@@@.@@@..@@.@@.@@@.@.@.@@.@@..@@.@@..@.@.@..@@@)
(.@@...@@@.@@@@@@@.@@@@@.@@@.@.@.@@@.@@@@..@.@@@@@@@@..@@@.@@.@...@.@@@.@.@@.@@@@@@@@@@@@@.@..@@@@@@@@...@@.@...@@@@@..@@@..@@@..@..@@.@@@@@)
(@@.@@.....@@@@@.@@.@.@.@.@@@@.@@..@@@@@@.@@.@@@@@@.@@...@.@@@@.@@..@@.@@@.@.@..@..@.@..@@@@@.@@@@.@...@.@.@@...@@@.@@..@.@.@@@@..@.@.@@@@.@)
(@.@.@@.@@@@@@@.@@@@@@@@@@@@@@..@@@@@@@@@...@@.@@@@@@@..@..@.@@.@.@...@@@@@@.@@@.@@@@.@@.@@..@@@.@@@@@@@@@@@@.@....@@@.@@@@@.@..@@.@.@@@.@@@)
(@.@..@@..@@@.@@.@@@@@@@@.@.@@.@@.@.@@.@@@@..@..@.@.@.@@@.@.@@..@@.@.@@.@..@..@@....@@.@@@@@.@.@@@...@.@@@@@.@.@@@@@.@.@@@@@.@@.@.@@.@@@@@.@)
(@@..@..@@.@..@@..@@@@@@@@.@..@..@@@@.@@@@.@@.@@@..@@@..@@.@@@@@@..@.@...@@@@.@@@@@@@@@@@@...@@..@@.@@@@.@..@.@@@@@@@@@@@.@...@@@.@@..@@@.@@)
(@@.@.@@..@..@@@@.@@..@@@@.@.@@@@@....@.@@@@@.@@.@@@@@@..@@@@@@@@@.@@@@@.@.@@@@@@@@....@...@@@@@@@.@..@@@.@.@@@@@@......@@..@@@..@@.@@@@@@@.)
(..@@..@....@.@.@..@.@..@.@..@@@.@.@@@@.@...@...@@@.@.@.@@@.@.@@@@.@.@@@..@.@.@@@@.@@@...@@@.@@@@@.@@@@@@.@..@.@...@@@.@.@@.@..@@@@@@@@@..@@)
(@@@@@.@@..@@@@@@@@.@.@@.@@@@@@@@@@@.@..@.@@@@@@@@.@..@...@.@@.@@.@@.@.@...@..@..@.@@@@.@@@@@.@@@@@@@@.@@..@@...@@.@..@@.@@@.@@@.@@@@@@@@@.@)
(@..@@..@@@@@.@.@@@@...@@@@@@@.@@@@@..@.@.@.....@@..@..@@@@@@..@....@.@.@@..@.@.@@@.@@@@@@@.@@.@@@..@.@..@@@@.@..@.@.@@.@.@@.@@.@@@@.@@.@@@@)
(....@@..@@@.@..@@.@@@@@..@@..@..@..@@@@.@@..@@.@@@@@@@@@@..@@.@@..@@.@@.@@@.@...@..@@@.@@..@@@@..@@@@@@@@@@@@@@..@@..@...@@@@.@@.@@@@.@.@.@)
(@@.@.@..@@.@..@@@@@@.@.@@@@@@.@..@@@....@@@.@..@..@@@@@@.@.@.....@.@@@@@@@.@@@..@@.@@.@@@@@@@@@@@.@@.@@@.@.@@@@@@@@@..........@@@.@@@.@@@@.)
(@@@@@.@@@.@@@@@@@@@.@@@.@@.@@..@@@@@@@@@.@@@..@@@@@@..@.@..@@@@@@@@.@@@..@@@@.@@@..@..@@@.@.@..@@.@...@@@.@@@.@@@@@@@@.@@@@@..@.@..@.@@@.@.)
(@.@@@@.@.@@..@@.@@..@@.@@@@@@@@@.@@..@@@@..@...@@@@..@..@.@@@@@@@.@..@@@.@@.@@@.@..@@.@@@@..@.@@@@@@..@@.@@@...@@@@@..@...@..@.@.@@...@@@@.)
(.@@@..@..@@.@@.@@@@@@@@@@@@@.@.....@@@@.@.@@@.@@.@@.@@.@..@@.@@@...@...@@.@@...@.@@.@@....@@..@@.@.@..@..@.@@.@.@@@@@@.@..@@@@.@@@@@.@@@...)
(@@@..@@@@@@@@....@@@@..@@@@@@@@@@.@@@.@@..@..@@@@..@@.@@@@@@@.@@@@@@@@@..@@...@....@..@..@.@.@@@@@@@..@.@@@.@@@.@@@.@.@.@@@@@@@.@@@@@.@@.@.)
(.@@.@.@@@@@@.@@@@@@@..@.@@@....@@....@.@@@@.@@.@@@.@@.@@@@@@.@.@..@@@@@.@@@..@@@.@@@@.@@@@@..@@@@@.@@.@@@@@@.@@.....@@@@.@@@@@@..@.@@@@@@..)
(@@@@@...@.@@@@@@@@@@@@@@@.@@@@@@.@@.@.....@..@@@@.@@@.@..@.@@.@.@.@.@@.@@@@@@......@@@@...@@@@.....@@.@.@@..@@@@@@@..@@@@@@.@@.@.@......@@@)
(.@@.@@..@..@@...@.@@@@@@@@...@.@@@@@..@@@@@@.@..@@...@@@@@@@@.@.@@@@@.@@@@@@@.@..@..@@.@@@.@@.@@@@@@@.@@..@@@..@..@@..@@..@@..@.@@@@@..@@@@)
(..@@.@@@.@@@@.@.@@@@@@.@@.@@@@.@@@@.@@@.@@.@..@.@@.@@@@@@@......@@..@.@..@@@@@@.@@.@@.@@.@.@@@@@@.@.@.@..@.@@.@..@.@@@@..@@@@@.@...@@@.@.@@)
(@.@.@@@@@@.@@@@@@@@@.@@.@@.@.@@@...@.@@@@@@.@@@@@@.@...@@@@.@@..@@@@@..@@@@@@@@..@.@@...@..@.@.@..@...@.@@@@@@@@@@.@..@...@.@.@@@@@.@@@@.@.)
(@@.@.@@@..@@@@@.@.@@@@@.@@..@@@@..@@.@@@@@@@..@.@.@@.@@@@@@@@.@.@@......@..@@.@@@@@.@@@.@.@@.@@@@..@@@@@@....@@.@@@@@.@@@.@..@.@.@@@@.@@@..)
(..@.@@@@@@@@@.@@@@@.@@@@@.@.@@.@@@@@.@@@@@@@@@...@...@.@.@.@@@@@@.@@..@...@.@@@..@..@@@.@..@@@@.@@@...@@@.@.@@@@@@.@@.@.@@@@@.@@@@@..@@@@.@)
(.@.@....@..@@@@..@.@@@..@@@@@@..@@@@@@.@@@.@@..@@.@.@.@@.@.@@@.@@@@@@@@.@@@@.@@@@.@.@..@...@@.@@@.@@@@@@@@@.@...@@@@@..@.@@@@@..@.@.@@@@@..)
(@.@@.@.@@@@@@.@@@.@@.@@@@@@.@@@@@@....@.@@.@@.@@@@@@@@.@@@.@@@@@@@@@...@.@@@@..@.@@@.@@@..@.@...@@.@@.@@@@.@.@@@@@@@......@@@.@@@@.@@@@.@@@)
(@@@..@@@@@..@@@...@@@@@..@.@@.@@@.@@....@@.@@@@@@@@@@@.@@.@...@.@@.@@.@@@.@@@.@.@@@@@@..@..@...@@@@@@..@@...@@@@@@..@@@@@..@@@@@@.@@@@.@@@.)
(.@..@@.@.@.@@@@.@.@@.@.@@@@..@.@@.@.@@.@.@..@@@@@@@@@@@@.@@.@@@.@@.@@@@.@@.@..@@.@@@@.@@@@.@@@@@.@..@@@@@@@@@@.@.@@@@@.@..@@.@@@.@@@@.@.@@@)
(@.@@@@@@@@@.@@@@.@..@.@.@@@@@@@..@.@@@.@@..@@@@@.@.@@@@.@@@@.@@@.@..@@@@@..@@@@@.@@@@@@..@@@@@@@@@@@.@@@@.@@@@@@@@@@..@@@@@@@..@@@...@@@.@.)
(@.@@.@@@.@.@@@.@@@@@@..@@.@.@.@@......@@@@@.@@.@@@@@@.@.@@@.@@@.@@...@@@@@..@.@@@@@@.@@@.@@@@@@@.@@@@.@@@.@@@@..@.@..@@.@.@.@@..@.@.@@@@@@@)
(.@@.@@.@@@@@...@@..@@@@.@.@.@@@.@@@.@@@@.@@@@@.@@.@@@@@.@@.@@@.@..@.@.@..@@@...@..@.@@...@.@.@.@@@@@@..@@.@@@@@..@@@@..@@@@@.@@@@..@@@@@.@.)
(@..@.@@@@@..@@@@....@@.@@@@@@.@@@@@...@@@.@..@@@..@@@@@@.@@.@.@@@.@@.@@@@@@@..@@....@@.@@@@@@.@@.@@@.@@@@@@.@@...@@@@@@@.@.@@@.@@.@@@.@..@.)
(@@@.@.@...@@@@@@@@@.@.@@..@@..@..@.@..@@@..@@@@.@@.@@@@@@@@@.@.@@@..@@@@.@@.@@.....@...@@@.@@@@@.@@.@@..@@@@@@@@@@@.@.@@@@@..@@@@@@@@@@@@.@)
(.@@.@..@@@.@@..@@@.@...@.@.@@@@@@@.@@@@@@@@.@@.@@@...@.@@@@@@.@.@.@@.@@@.@.@.@@.@@...@@@.@@.@.@@.@@@@@@@@.@@@@@@@@@@@@@@@.@@.@@@.@@@@.@@..@)
(@@@@@@@.@@@@.@.@@@@..@@@@@.@@@@@@@.@@.@@@@@@.@.@@.@@@@..@@...@@.@.@@.@@@@.@@@@@@@@@@@@.@.@@@.@@..@.@..@.@@@@@@...@@@@@.@@@@@@@@@....@.@@.@.)
(@@@@@..@@.@@@.@@@@@.@@@@.@@@...@@@@@@@@.@@@.@..@@@..@@@@@..@..@@.@....@....@@@.@@@..@@@@.@@....@@@..@.@@@@@@..@.@@.@@@.@..@@@@@@.@@.@@...@.)
(.@@.@@.@.@@@@@@.@@.@..@...@@..@@@@@@@@@.@.@@@@@...@.@@.@@@@@.@@@@@.@.@@@@@.@@@.@@@@..@@@@@.@.@@..@@.@@..@@@.@..@@@@@..@@@@@.@@@@..@.@@@@..@)
(.@.@@.@@@.@@.@@@.@@@..@@.@.@.@@..@@@@@@.@.@@@@@@.@...@....@.@@.@@@@...@.@.@@.@.@..@@@...@.@@@@.@@@@@@@.@@@@@@@@@.@.@...@@....@@.@@....@@.@.)
(..@.@@@@@@@@@.@@@@@@@@@.@@.@@.@@.@@.@.@.@.@@@@@..@@@@.@@.@@@@@@@.@@@@@.@@@@@@.@@@@.@@.@@@@.@.@@@@@...@.@.@@..@@@.@@.@@@@@.@.@@.@@@@@@.@@.@@)
(@@....@.@@.@.@@@@@...@@@.@@@.@.@@@@@@@@@@@@.@@@@@@@@@@@@...@@@.@@.@@@.@@@@..@@@@@@...@@@.@@@@@@..@.@@@@.@.@@@@..@@.@.@.@@@@@@..@@.@@@@@@@@.)
(....@@@@@..@.@..@@@@.@@.@@....@.@@.@.@@@@@@@.@@@@.@@@.@@....@@@@@.@.@@@@@@@@..@@@@@.@@....@@@.@@@.@@.@@@@.@@.@@.@...@.@.@@..@.@@@.@@@@@...@)
(.@.@.@.@@@@@@@..@@@.@@@@@@.@@..@@@.@@@..@@@.@.@@.@.@@@@.@@..@@@@@.@...@.@@.@@@@.@..@@@.@.@..@@@@@..@...@..@@@@...@@@..@.@@@@@.@@@@@.@@.@.@@)
(..@...@.@@.@@@@.@.@@@.@@.@@@@@..@@...@@@@..@.@@@@..@@@@@@@@@@.@.@@.@@..@@@@@.@@...@@@..@.@@@.@@..@@@.@.@@@..@@@@@.@.@..@@@@....@@@@@@@@@@@.)
(@@@.@@@@..@@@@@@@.@@.@@@@@.@..@.@...@.@@@@@@...@@@@@.@@.@@@@.@@...@.@@.@@@.@@..@@@@..@@@.@@@@@@@@.@.@@@.@..@..@.@@@.@@@.@.@@.@@@.@@@@.@@@.@)
(@.@@@@.@@.@.@@.@.@@@@@...@@@.@.@..@.@@@@@@..@@@.....@.@@.@..@@@@.@.@.@@@..@@@@@@..@.@@@.@@@@...@...@..@@..@@@.@@@@@@.@@@@..@..@.@@.@...@...)
(@@@...@.@@@@..@@@.@@@@.@.@.@.@@.@@.@@...@.@@@.@@.@@@@@@@@@.@@..@@@@@.@@@.@.@..@@.@@.@...@@@@@@@@@.@@....@@@..@@@.@@@@.@@.@@.@@@.@@@.@@@@@@.)
(@@@.@@..@.@..@@@@@.@@.@@@@..@@@...@@@@@@@@.@@@@....@.@.@@@...@@..@@@@.@@@@@@@.@.@@..@@@@.@@@@@@.@@..@@@@@@@.@..@@@@@@.@.@.@@@@.@.@@.@.@@..@)
(..@@@@@@.@@@@@@@@..@@@@@....@@.@@@.@@..@.@..@@.@.@@..@@.@.@@@@.@@@.@@@@@@@.@.@@@@@@@@..@@@@@@@@.@@@@@@@@@...@@@@@@@..@@@@@@.@@.@@@@@.@.@@.@)
(@@@.@@@.@@@@.@@@@..@@@@@@@@..@.@@@@..@@@@@.@.@@@@.@.@.@@.@@.@@.@@@@@@@@@@@@....@.@..@.@@..@@@.@@.@.@@@@.@@@@@@..@.@.@@.@.@@.@.@@@.@@@.@@.@.)
(@@.@@.@...@@@.@@.@@...@.@@.@.@@@@.@@@@.@@@@@.@@@@@...@@@@@@.@@@@@@@@@@@..@.@@@.@@.@.@.@@@@..@..@@@@.@.@@.@.@@@..@@.@@@@@@@@@@.@@@@@....@@@@)
(@.@@@.@.@..@@.@@@.@..@@@@@.@@.@...@.@@@@...@@@@@.@@.@@@@.@@..@@..@@.@@@.@.@.@..@..@@.@@@@@.@@@.@@@.@@.@@@@@@.@.@@@@.@.@.@@.@@@@.@...@.@@@@.)
(@@.@.@@....@@.....@@...@@@.@@.@@@.@..@.@@...@...@@@@@@@..@..@@@.@@.@@..@@@@@.@.@....@..@@@@@..@.@.@@@@.@..@@.@@@@@.@.@@..@@.@.@@@@..@..@.@@)
(@@..@@@....@..@..@@@@@@@@@@...@@@@@@@...@@.@.@.@.@@@@@@@@.@@@@.@@@@.@..@.@@....@..@.@@..@@@@@...@..@@..@.@@@@@.@@@@@@@@.@@@@..@@...@@.@@.@@)
(..@@@@@..@.@@...@@@@..@.....@@@@@@.@@@@.@..@@..@@.@@@.@@@@@..@@@@.@@@@@.@@@...@.@...@.@.@@@@@@.@@..@@@@@@@.@.@@.@@@@@.@.@@@@..@@@@@.@@@@@@.)
(..@@.@.@@@@@@@.@.@@@@.@@.@@@@@@@...@@@.@@@@@@@@.@@@@@@..@@.....@@.@@@@@@@@@..@.@..@@@@..@@@...@.@@@@@..@.@@@@@.@@..@@@..@.....@@@@@...@.@@@)
(@@.@.@..@@@.@@@@...@@@@@.@@@.@@@....@@@@@@@@@.@.@@@@.@@@@@@.@@.@@@@@@@@....@.@.@@@@.@..@..@@.@@.@@@..@@.@@@.@.@.@.@@@@.@@..@.@@.@@.@..@...@)
] bind def


%% ----- Output -------

/setup_output
{
   /stdout (%stdout) (w) file def
   /print { stdout exch writestring } bind def
   /println { print stdout (\n) writestring } bind def

   /LM   50 def      % Left margin
   /RM   578 def     % Right margin
   /TM   700 def     % Top margin
   /BM   10 def      % Bottom margin
   /fontsize 18 def  % Change this to change font-size
   /ypos TM def      % current y-position
   /lineheight fontsize def

   /font_normal /Times-Roman findfont fontsize scalefont def
   /font_bold /Times-Bold findfont fontsize scalefont def
   font_normal setfont
} def

/newline
 { currentpoint exch pop lineheight sub  % calc y-val
   BM lt                                 % check if less than bottom margin
   { showpage LM TM moveto               % New page
     /ypos TM def }
   { ypos lineheight sub                 % Go left/down
     /ypos exch def
     LM ypos moveto } ifelse
} def
   
/prtstr
 { dup stringwidth pop      % calc length of string
   currentpoint pop         % get horizontal position
   add RM gt                % sum > right margin?
   {newline} if             % if so, next line
   show 
} def

/setnormal { font_normal setfont } bind def
/setbold { font_bold setfont } bind def

%% ---- Utils ------

%% ----- Input conversion -------

/make_line  % str -- array
{
   dup length array     % make new array of same len  -- str array
   /i 0 def

   1 index 
   { 
      64 eq
      { dup i 1 put }
      { dup i 0 put} ifelse
      /i i 1 add def
   } forall
   exch pop
} def

/make_array  % data -- array (of arrays)
{
   /input exch def
   input length /h exch def
   input 0 get length /w exch def

   /result h array def

   0 1 h 1 sub
   {
      /j exch def
      /l input j get def
      l make_line
      
      result exch j exch put
   } for

   result
} def

%% ----- step 1 -------

/count_neighbours  % grid y x -- count
{
   /x exch def
   /y exch def
   /grid exch def

   /h grid length def
   /w grid 0 get length def

   /result 0 def

   -1 1 1 {
      /dy exch def
      -1 1 1 {
         /dx exch def
         dy 0 eq dx 0 eq and 
         {
             % Center cell. Ignore.
         }
         {
            /ny y dy add def
            /nx x dx add def

            % bounds check
            ny 0 ge ny h lt and
            nx 0 ge nx w lt and and
            {
               grid ny get nx get 
               /result exch result add def
            } if
         } ifelse
      } for
   } for

   result
} bind def

/check_cells 
{
   /grid exch def
   /h grid length def
   /w grid 0 get length def
   /total_count 0 def

   0 1 h 1 sub 
   {
      /y exch def
      0 1 w 1 sub 
      {
         /x exch def

         grid y get x get
         1 eq
         {
            grid y x count_neighbours 
            4 lt
            {
               /total_count total_count 1 add def
            } if
         } if

      } for
   } for

   total_count
} def

%% ----- step 2 -------


%% ------------------------------

setup_output

/roll_array grid make_array def

roll_array check_cells /rolls_step_1 exch def


LM TM moveto
setbold (Advent of Code 2025) prtstr setnormal newline newline
(- Day 4 -) prtstr 1 1 6 { pop newline } for
setbold (Result Step 1: ) prtstr setnormal rolls_step_1 100 string cvs prtstr newline newline
%setbold (Result Step 2: ) prtstr setnormal jolts_step2_sum 100 string cvs prtstr newline

% Write to stdout as well
(\nAdvent of Code 2025  - Day 4 - Anders Piniesjö\n) println 
(Step 1: ) print rolls_step_1 20 string cvs println
%(Step 2: ) print jolts_step2_sum 20 string cvs println
